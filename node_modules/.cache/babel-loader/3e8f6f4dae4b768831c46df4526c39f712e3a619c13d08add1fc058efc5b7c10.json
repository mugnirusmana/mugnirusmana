{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{sideMenu}from'./sideMenuSlice';import{AUTH}from\"./../services\";const initialState={token:\"\",data:{},isUnathorized:false,isLoading:false,isError:false,isSuccess:false,errorMessage:null};export const authSlice=createSlice({name:\"auth\",initialState,reducers:{removeToken:state=>{state.isLoading=false;state.isSuccess=true;state.isError=false;state.errorMessage=null;state.token=null;state.data={};},defaultLogIn:state=>{state.isLoading=false;state.isSuccess=false;state.isError=false;},logIn:state=>{state.isLoading=true;state.isSuccess=false;state.isError=false;state.errorMessage=null;},logInSuccess:(state,action)=>{var _action$payload,_action$payload2;state.isLoading=false;state.isSuccess=true;state.isError=false;state.errorMessage=null;state.token=action===null||action===void 0?void 0:(_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.token;state.data=action===null||action===void 0?void 0:(_action$payload2=action.payload)===null||_action$payload2===void 0?void 0:_action$payload2.data;},logInFailed:(state,action)=>{state.isLoading=false;state.isSuccess=false;state.isError=true;state.errorMessage=action===null||action===void 0?void 0:action.payload;},removeTokenUnathorized:(state,action)=>{state.isLoading=false;state.isSuccess=false;state.isError=false;state.isUnathorized=true;state.errorMessage=action===null||action===void 0?void 0:action.payload;state.token=null;state.data={};},defaultRemoveTokenUnathorized:state=>{state.isLoading=false;state.isSuccess=false;state.isError=false;state.isUnathorized=false;state.errorMessage=null;},setTokenSlice:(state,action)=>{var _action$payload3,_action$payload4;state.token=action===null||action===void 0?void 0:(_action$payload3=action.payload)===null||_action$payload3===void 0?void 0:_action$payload3.token;state.data=action===null||action===void 0?void 0:(_action$payload4=action.payload)===null||_action$payload4===void 0?void 0:_action$payload4.data;},setDataSlice:(state,action)=>{state.data=action===null||action===void 0?void 0:action.payload;}}});// this is for dispatch\nexport const{removeToken,defaultLogIn,logIn,logInSuccess,logInFailed,removeTokenUnathorized,defaultRemoveTokenUnathorized,setTokenSlice,setDataSlice}=authSlice.actions;export const signIn=(params,width,desktopSize)=>{return async(dispatch,getState)=>{dispatch(logIn());return AUTH.login(params).then(response=>{var _response$data,_response$data$meta;if(response!==null&&response!==void 0&&(_response$data=response.data)!==null&&_response$data!==void 0&&(_response$data$meta=_response$data.meta)!==null&&_response$data$meta!==void 0&&_response$data$meta.is_success){var _response$data2,_response$data2$data,_response$data3;const data={token:response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:(_response$data2$data=_response$data2.data)===null||_response$data2$data===void 0?void 0:_response$data2$data.access_token,data:response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.data};delete data.data.access_token;if(width<desktopSize){dispatch(sideMenu(false));}else{dispatch(sideMenu(true));}dispatch(logInSuccess(data));}else{var _response$data$meta$m,_response$data4,_response$data4$meta;const message=(_response$data$meta$m=response===null||response===void 0?void 0:(_response$data4=response.data)===null||_response$data4===void 0?void 0:(_response$data4$meta=_response$data4.meta)===null||_response$data4$meta===void 0?void 0:_response$data4$meta.message)!==null&&_response$data$meta$m!==void 0?_response$data$meta$m:'Oops! Someting went wrong';dispatch(logInFailed(message));}}).catch(error=>{var _error$response$data$,_error$response,_error$response$data,_error$response$data$2;const message=(_error$response$data$=error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:(_error$response$data$2=_error$response$data.meta)===null||_error$response$data$2===void 0?void 0:_error$response$data$2.message)!==null&&_error$response$data$!==void 0?_error$response$data$:'Oops! Someting went wrong';dispatch(logInFailed(message));});};};export const defaultSignIn=()=>{return async(dispatch,getState)=>{dispatch(defaultLogIn());};};export const logOut=()=>{return async(dispatch,getState)=>{dispatch(logIn());setTimeout(()=>{dispatch(removeToken());},1500);};};export const logOutUnathorized=message=>{return async(dispatch,getState)=>{dispatch(removeTokenUnathorized(message));};};export const defaultLogOutUnathorized=()=>{return async(dispatch,getState)=>{dispatch(defaultRemoveTokenUnathorized());};};export const setToken=(data,width,desktopSize)=>{return async(dispatch,getState)=>{if(width<desktopSize){dispatch(sideMenu(false));}else{dispatch(sideMenu(true));}dispatch(setTokenSlice(data));};};export const setData=data=>{return async(dispatch,getState)=>{dispatch(setDataSlice(data));};};export default authSlice.reducer;","map":{"version":3,"names":["createSlice","sideMenu","AUTH","initialState","token","data","isUnathorized","isLoading","isError","isSuccess","errorMessage","authSlice","name","reducers","removeToken","state","defaultLogIn","logIn","logInSuccess","action","_action$payload","_action$payload2","payload","logInFailed","removeTokenUnathorized","defaultRemoveTokenUnathorized","setTokenSlice","_action$payload3","_action$payload4","setDataSlice","actions","signIn","params","width","desktopSize","dispatch","getState","login","then","response","_response$data","_response$data$meta","meta","is_success","_response$data2","_response$data2$data","_response$data3","access_token","_response$data$meta$m","_response$data4","_response$data4$meta","message","catch","error","_error$response$data$","_error$response","_error$response$data","_error$response$data$2","defaultSignIn","logOut","setTimeout","logOutUnathorized","defaultLogOutUnathorized","setToken","setData","reducer"],"sources":["/var/www/html/fe/src/redux/authSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { sideMenu } from './sideMenuSlice';\nimport { AUTH } from \"./../services\";\n\nconst initialState = {\n  token: \"\",\n  data: {},\n  isUnathorized: false,\n  isLoading: false,\n  isError: false,\n  isSuccess: false,\n  errorMessage: null\n};\n\nexport const authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    removeToken: (state) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.isError = false;\n      state.errorMessage = null;\n      state.token = null;\n      state.data = {};\n    },\n    defaultLogIn: (state) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n    },\n    logIn: (state) => {\n      state.isLoading = true;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = null;\n    },\n    logInSuccess: (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.isError = false;\n      state.errorMessage = null;\n      state.token = action?.payload?.token;\n      state.data = action?.payload?.data;\n    },\n    logInFailed: (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = true;\n      state.errorMessage = action?.payload;\n    },\n    removeTokenUnathorized: (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.isUnathorized = true;\n      state.errorMessage = action?.payload;\n      state.token = null;\n      state.data = {};\n    },\n    defaultRemoveTokenUnathorized: (state) => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.isUnathorized = false;\n      state.errorMessage = null;\n    },\n    setTokenSlice: (state, action) => {\n      state.token = action?.payload?.token;\n      state.data = action?.payload?.data;\n    },\n    setDataSlice: (state, action) => {\n      state.data = action?.payload;\n    },\n  },\n});\n\n// this is for dispatch\nexport const { removeToken, defaultLogIn, logIn, logInSuccess, logInFailed, removeTokenUnathorized, defaultRemoveTokenUnathorized, setTokenSlice, setDataSlice } = authSlice.actions;\n\nexport const signIn = (params, width, desktopSize) => {\n  return async (dispatch, getState) => {\n    dispatch(logIn());\n    return AUTH.login(params)\n      .then((response) => {\n        if (response?.data?.meta?.is_success) {\n          const data = {\n            token: response?.data?.data?.access_token,\n            data: response?.data?.data\n          }\n          delete data.data.access_token;\n          if (width < desktopSize) {\n            dispatch(sideMenu(false));\n          } else {\n            dispatch(sideMenu(true));\n          }\n          dispatch(logInSuccess(data));\n        } else {\n          const message = response?.data?.meta?.message??'Oops! Someting went wrong';\n          dispatch(logInFailed(message));\n        }\n      })\n      .catch((error) => {\n        const message = error?.response?.data?.meta?.message??'Oops! Someting went wrong';\n        dispatch(logInFailed(message));\n      });\n  };\n};\n\nexport const defaultSignIn = () => {\n  return async (dispatch, getState) => {\n    dispatch(defaultLogIn());\n  };\n}\n\nexport const logOut = () => {\n  return async (dispatch, getState) => {\n    dispatch(logIn());\n    setTimeout(() => {\n      dispatch(removeToken());\n    }, 1500);\n  };\n}\n\nexport const logOutUnathorized = (message) => {\n  return async (dispatch, getState) => {\n    dispatch(removeTokenUnathorized(message));\n  };\n}\n\nexport const defaultLogOutUnathorized = () => {\n  return async (dispatch, getState) => {\n    dispatch(defaultRemoveTokenUnathorized());\n  };\n}\n\nexport const setToken = (data, width, desktopSize) => {\n  return async (dispatch, getState) => {\n    if (width < desktopSize) {\n      dispatch(sideMenu(false));\n    } else {\n      dispatch(sideMenu(true));\n    }\n    dispatch(setTokenSlice(data))\n  }\n}\n\nexport const setData = (data) => {\n  return async (dispatch, getState) => {\n    dispatch(setDataSlice(data));\n  }\n}\n\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}