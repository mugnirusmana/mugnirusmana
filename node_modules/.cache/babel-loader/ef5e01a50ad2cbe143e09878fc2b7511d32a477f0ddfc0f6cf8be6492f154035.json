{"ast":null,"code":"import{useEffect,useState}from'react';import{useLocation,useNavigate}from'react-router';import{useDispatch,useSelector}from'react-redux';import{defaultActivateAccountValidate,submitActivateAccountValidate}from'./../../redux/activateAccountValidateSlice';import Alert from\"../../components/alert\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ActivateAccountValidate=()=>{var _location$pathname;const navigate=useNavigate();const dispatch=useDispatch();const location=useLocation();const activateAccountValidateSlice=useSelector(_ref=>{let{activateAccountValidate}=_ref;return activateAccountValidate;});const[showLoader,setShowLoader]=useState(true);const[firstLoad,setFirstLoad]=useState(false);const[activateAccountToken,setActivateAccountToken]=useState(location===null||location===void 0?void 0:(_location$pathname=location.pathname)===null||_location$pathname===void 0?void 0:_location$pathname.replace('/activate-account/',''));const[showAlert,setShowAlert]=useState({show:false,type:'',title:'',message:'',buttonLabel:'',action:()=>{}});useEffect(()=>{var _location$pathname2;setFirstLoad(true);setActivateAccountToken(location===null||location===void 0?void 0:(_location$pathname2=location.pathname)===null||_location$pathname2===void 0?void 0:_location$pathname2.replace('/activate-account/',''));},[]);useEffect(()=>{if(firstLoad){setFirstLoad(false);onSubmit();}},[firstLoad]);useEffect(()=>{let{isLoading,isError,isSuccess,errorMessage,data}=activateAccountValidateSlice;if(!isLoading&&isSuccess){setShowLoader(false);setShowAlert({show:true,type:'success',title:'Activate Account',message:'Your account successfully activated',buttonLabel:'Back to Login',action:()=>{setShowAlert({show:false,type:'',title:'',message:'',buttonLabel:'',action:()=>{}});dispatch(defaultActivateAccountValidate());navigate('/login');}});}if(!isLoading&&isError){var _data$error,_data$error2;setShowLoader(false);let message=errorMessage;if(data!==null&&data!==void 0&&(_data$error=data.error)!==null&&_data$error!==void 0&&_data$error.token)message=\"<div>Someting wrong with your data<br /><span class=\\\"font-bold\\\">\".concat(data===null||data===void 0?void 0:(_data$error2=data.error)===null||_data$error2===void 0?void 0:_data$error2.token,\"</span></div>\");setShowAlert({show:true,type:'warning',title:'Activate Account',message:message,buttonLabel:'Confirm',action:()=>{setShowAlert({show:false,type:'',title:'',message:'',buttonLabel:'',action:()=>{}});dispatch(defaultActivateAccountValidate());}});}},[activateAccountValidateSlice]);const onSubmit=()=>{if(!(activateAccountValidateSlice!==null&&activateAccountValidateSlice!==void 0&&activateAccountValidateSlice.isLoading)){dispatch(submitActivateAccountValidate({token:activateAccountToken}));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"w-full tablet:w-[400px] h-fit p-10 rounded-md bg-white shadow-md flex flex-col gap-5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-center font-bold mb-5\",children:\"Activate Account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col items-center justify-center transition-all duration-300 ease-in-out \".concat(showLoader?'opacity-100':'opacity-0'),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Activation your account...\"}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-spinner animate-spin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-row items-center justify-center text-center text-gray-400 text-xs\",children:[\"Back to\\xA0\",/*#__PURE__*/_jsx(\"span\",{className:\"cursor-pointer text-sky-600 font-bold\",onClick:()=>navigate('/login'),children:\"Login\"})]})]}),/*#__PURE__*/_jsx(Alert,{show:showAlert===null||showAlert===void 0?void 0:showAlert.show,type:showAlert===null||showAlert===void 0?void 0:showAlert.type,title:showAlert===null||showAlert===void 0?void 0:showAlert.title,message:showAlert===null||showAlert===void 0?void 0:showAlert.message,showCancelButton:false,confirmLabel:showAlert===null||showAlert===void 0?void 0:showAlert.buttonLabel,onConfirm:()=>showAlert!==null&&showAlert!==void 0&&showAlert.action?showAlert.action():{}})]});};export default ActivateAccountValidate;","map":{"version":3,"names":["useEffect","useState","useLocation","useNavigate","useDispatch","useSelector","defaultActivateAccountValidate","submitActivateAccountValidate","Alert","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActivateAccountValidate","_location$pathname","navigate","dispatch","location","activateAccountValidateSlice","_ref","activateAccountValidate","showLoader","setShowLoader","firstLoad","setFirstLoad","activateAccountToken","setActivateAccountToken","pathname","replace","showAlert","setShowAlert","show","type","title","message","buttonLabel","action","_location$pathname2","onSubmit","isLoading","isError","isSuccess","errorMessage","data","_data$error","_data$error2","error","token","concat","children","className","onClick","showCancelButton","confirmLabel","onConfirm"],"sources":["/var/www/html/fe/src/pages/activate-account-validate/index.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { defaultActivateAccountValidate, submitActivateAccountValidate } from './../../redux/activateAccountValidateSlice';\n\nimport Alert from \"../../components/alert\";\n\nconst ActivateAccountValidate = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const activateAccountValidateSlice = useSelector(({ activateAccountValidate }) => activateAccountValidate);\n  const [showLoader, setShowLoader] = useState(true);\n  const [firstLoad, setFirstLoad] = useState(false);\n  const [activateAccountToken, setActivateAccountToken] = useState(location?.pathname?.replace('/activate-account/',''));\n  const [showAlert, setShowAlert] = useState({\n    show: false,\n    type: '',\n    title: '',\n    message: '',\n    buttonLabel: '',\n    action: () => {}\n  })\n\n  useEffect(() => {\n    setFirstLoad(true);\n    setActivateAccountToken(location?.pathname?.replace('/activate-account/',''));\n  }, []);\n\n  useEffect(() => {\n    if (firstLoad) {\n      setFirstLoad(false);\n      onSubmit();\n    }\n  }, [firstLoad])\n\n  useEffect(() => {\n    let {\n      isLoading,\n      isError,\n      isSuccess,\n      errorMessage,\n      data\n    } = activateAccountValidateSlice;\n\n    if (!isLoading && isSuccess) {\n      setShowLoader(false);\n      setShowAlert({\n        show: true,\n        type: 'success',\n        title: 'Activate Account',\n        message: 'Your account successfully activated',\n        buttonLabel: 'Back to Login',\n        action: () => {\n          setShowAlert({\n            show: false,\n            type: '',\n            title: '',\n            message: '',\n            buttonLabel: '',\n            action: () => {}\n          })\n          dispatch(defaultActivateAccountValidate());\n          navigate('/login');\n        }\n      })\n    }\n\n    if (!isLoading && isError) {\n      setShowLoader(false);\n      let message = errorMessage\n      if (data?.error?.token) message = `<div>Someting wrong with your data<br /><span class=\"font-bold\">${data?.error?.token}</span></div>`;\n      setShowAlert({\n        show: true,\n        type: 'warning',\n        title: 'Activate Account',\n        message: message,\n        buttonLabel: 'Confirm',\n        action: () => {\n          setShowAlert({\n            show: false,\n            type: '',\n            title: '',\n            message: '',\n            buttonLabel: '',\n            action: () => {}\n          })\n          dispatch(defaultActivateAccountValidate());\n        }\n      })\n    }\n\n  }, [activateAccountValidateSlice])\n\n  const onSubmit = () => {\n    if (!activateAccountValidateSlice?.isLoading) {\n      dispatch(submitActivateAccountValidate({token: activateAccountToken}));\n    }\n  }\n\n  return (\n    <>\n      <form className=\"w-full tablet:w-[400px] h-fit p-10 rounded-md bg-white shadow-md flex flex-col gap-5\">\n        <span className=\"text-center font-bold mb-5\">Activate Account</span>\n        \n        <div className={`w-full flex flex-col items-center justify-center transition-all duration-300 ease-in-out ${showLoader ? 'opacity-100' : 'opacity-0'}`}>\n          <span>Activation your account...</span>\n          <span><i className=\"fa-solid fa-spinner animate-spin\"></i></span>\n        </div>\n        \n        <div className='w-full flex flex-row items-center justify-center text-center text-gray-400 text-xs'>Back to&nbsp;<span className='cursor-pointer text-sky-600 font-bold' onClick={() => navigate('/login')}>Login</span></div>\n      </form>\n\n      <Alert\n        show={showAlert?.show}\n        type={showAlert?.type}\n        title={showAlert?.title}\n        message={showAlert?.message}\n        showCancelButton={false}\n        confirmLabel={showAlert?.buttonLabel}\n        onConfirm={() => showAlert?.action ? showAlert.action() : {}}\n      />\n    </>\n  )\n}\n\nexport default ActivateAccountValidate;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}